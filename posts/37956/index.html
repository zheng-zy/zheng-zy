<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="我将在茫茫人海中寻访我唯一之灵魂伴侣。得之，我幸；不得，我命。"><title>docker入门 | 苏陌年的小站</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">docker入门</h1><a id="logo" href="/.">苏陌年的小站</a><p class="description">记录，为了成为更好的自己</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">docker入门</h1><div class="post-meta">Apr 10, 2017<span> | </span><span class="category"><a href="/categories/tech/">tech</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="posts/37956/" href="/posts/37956/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><h3 id="ubuntu16-04安装docker"><a href="#ubuntu16-04安装docker" class="headerlink" title="ubuntu16.04安装docker"></a>ubuntu16.04安装docker</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">root@VM-64-131-ubuntu:~# sudo apt-get install docker.io</div></pre></td></tr></table></figure>
<h3 id="查看当前版本"><a href="#查看当前版本" class="headerlink" title="查看当前版本"></a>查看当前版本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">root@VM-64-131-ubuntu:~# docker version</div><div class="line">Client:</div><div class="line">Version:      1.12.6</div><div class="line">API version:  1.24</div><div class="line">Go version:   go1.6.2</div><div class="line">Git commit:   78d1802</div><div class="line">Built:        Tue Jan 31 23:35:14 2017</div><div class="line">OS/Arch:      linux/amd64</div><div class="line"></div><div class="line">Server:</div><div class="line">Version:      1.12.6</div><div class="line">API version:  1.24</div><div class="line">Go version:   go1.6.2</div><div class="line">Git commit:   78d1802</div><div class="line">Built:        Tue Jan 31 23:35:14 2017</div><div class="line">OS/Arch:      linux/amd64</div></pre></td></tr></table></figure>
<h3 id="检索可用的镜像"><a href="#检索可用的镜像" class="headerlink" title="检索可用的镜像"></a>检索可用的镜像</h3><p>你可以通过浏览这个网页来查找你想要使用的镜像，或者使用命令行的工具来检索。</p>
<p><a href="index.docker.io">docker镜像检索网站</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">root@VM-64-131-ubuntu:~# docker search learn/tutorial</div><div class="line">NAME                         DESCRIPTION                          STARS     OFFICIAL   AUTOMATED</div><div class="line">learn/tutorial                                                    25                   </div><div class="line">danmaq/tutorial-learn-ping   from learn/tutorial + install ping   0</div></pre></td></tr></table></figure>
<h3 id="下载容器镜像"><a href="#下载容器镜像" class="headerlink" title="下载容器镜像"></a>下载容器镜像</h3><p>执行pull命令的时候要写完整的名字，比如”learn/tutorial”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">root@VM-64-131-ubuntu:~# docker pull learn/tutorial</div><div class="line">Using default tag: latest</div><div class="line">latest: Pulling from learn/tutorial</div><div class="line">271134aeb542: Pull complete </div><div class="line">Digest: sha256:2933b82e7c2a72ad8ea89d58af5d1472e35dacd5b7233577483f58ff8f9338bd</div><div class="line">Status: Downloaded newer image for learn/tutorial:latest</div></pre></td></tr></table></figure>
<h3 id="在docker容器中运行hello-world"><a href="#在docker容器中运行hello-world" class="headerlink" title="在docker容器中运行hello world!"></a>在docker容器中运行hello world!</h3><p>docker run命令有两个参数，一个是镜像名，一个是要在镜像中运行的命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">root@VM-64-131-ubuntu:~# docker run learn/tutorial echo &quot;hello&quot;</div><div class="line">hello</div></pre></td></tr></table></figure>
<h3 id="在容器中安装新的程序"><a href="#在容器中安装新的程序" class="headerlink" title="在容器中安装新的程序"></a>在容器中安装新的程序</h3><p>目标：learn/tutorial镜像里面安装ping程序。</p>
<p>提示：在执行apt-get 命令的时候，要带上-y参数。如果不指定-y参数的话，apt-get命令会进入交互模式，需要用户输入命令来进行确认，但在docker环境中是无法响应这种交互的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">root@VM-64-131-ubuntu:~# docker run learn/tutorial apt-get install -y ping</div><div class="line">Reading package lists...</div><div class="line">Building dependency tree...</div><div class="line">The following NEW packages will be installed:</div><div class="line">iputils-ping</div><div class="line">0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.</div><div class="line">Need to get 56.1 kB of archives.</div><div class="line">After this operation, 143 kB of additional disk space will be used.</div><div class="line">Get:1 http://archive.ubuntu.com/ubuntu/ precise/main iputils-ping amd64 3:20101006-1ubuntu1 [56.1 kB]</div><div class="line">debconf: delaying package configuration, since apt-utils is not installed</div><div class="line">Fetched 56.1 kB in 2s (19.7 kB/s)</div><div class="line">Selecting previously unselected package iputils-ping.</div><div class="line">(Reading database ... 7545 files and directories currently installed.)</div><div class="line">Unpacking iputils-ping (from .../iputils-ping_3%3a20101006-1ubuntu1_amd64.deb) ...</div><div class="line">Setting up iputils-ping (3:20101006-1ubuntu1) ...</div></pre></td></tr></table></figure>
<h3 id="保存对容器的修改"><a href="#保存对容器的修改" class="headerlink" title="保存对容器的修改"></a>保存对容器的修改</h3><p>当你对某一个容器做了修改之后（通过在容器中运行某一个命令），可以把对容器的修改保存下来，这样下次可以从保存后的最新状态运行该容器。docker中保存状态的过程称之为committing，它保存的新旧状态之间的区别，从而产生一个新的版本。</p>
<p>目标：首先使用docker ps -l命令获得安装完ping命令之后容器的id。然后把这个镜像保存为learn/ping。<br>提示：</p>
<ol>
<li>运行docker commit，可以查看该命令的参数列表。</li>
<li>你需要指定要提交保存容器的ID。(译者按：通过docker ps -l 命令获得)</li>
<li>无需拷贝完整的id，通常来讲最开始的三至四个字母即可区分。（译者按：非常类似git里面的版本号)</li>
<li>使用docker images，可以查看提交的容器。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">root@VM-64-131-ubuntu:~# docker ps -l</div><div class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS                          PORTS               NAMES</div><div class="line">9f022f9f4cb2        learn/tutorial      &quot;apt-get install -y p&quot;   About a minute ago   Exited (0) About a minute ago                       small_brahmagupta</div><div class="line">root@VM-64-131-ubuntu:~# docker commit 9f0 learn/ping</div><div class="line">sha256:95027d996397a731d98a8a7a2b87d34feed9118324c36017fd22253257464db5</div><div class="line">root@VM-64-131-ubuntu:~# docker images</div><div class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</div><div class="line">learn/ping          latest              95027d996397        29 seconds ago      139.5 MB</div><div class="line">learn/tutorial      latest              a7876479f1aa        3 years ago         128 MB</div></pre></td></tr></table></figure>
<h3 id="运行新的镜像"><a href="#运行新的镜像" class="headerlink" title="运行新的镜像"></a>运行新的镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">root@VM-64-131-ubuntu:~# docker run learn/ping ping www.qq.com</div><div class="line">PING www.qq.com (101.226.103.106) 56(84) bytes of data.</div><div class="line">64 bytes from 101.226.103.106: icmp_req=1 ttl=55 time=30.9 ms</div><div class="line">64 bytes from 101.226.103.106: icmp_req=2 ttl=55 time=31.3 ms</div><div class="line">^C64 bytes from 101.226.103.106: icmp_req=3 ttl=55 time=31.0 ms</div><div class="line"></div><div class="line">--- www.qq.com ping statistics ---</div><div class="line">3 packets transmitted, 3 received, 0% packet loss, time 2002ms</div><div class="line">rtt min/avg/max/mdev = 30.947/31.124/31.341/0.260 ms</div></pre></td></tr></table></figure>
<h3 id="检查运行中的镜像"><a href="#检查运行中的镜像" class="headerlink" title="检查运行中的镜像"></a>检查运行中的镜像</h3><p>目标：查找某一个运行中容器的id，然后使用docker inspect命令查看容器的信息。<br>提示：可以使用镜像id的前面部分，不需要完整的id。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">root@VM-64-131-ubuntu:~/soft# docker ps</div><div class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</div><div class="line">41e85a5f867a        learn/ping          &quot;ping www.qq.com&quot;   5 seconds ago       Up 5 seconds                            gigantic_nobel</div><div class="line">root@VM-64-131-ubuntu:~/soft# docker inspect 41e</div><div class="line">[</div><div class="line">    &#123;</div><div class="line">        &quot;Id&quot;: &quot;41e85a5f867a6a42d9feee2835d294238395ec517088b74b70f312d242e3553a&quot;,</div><div class="line">        &quot;Created&quot;: &quot;2017-03-30T08:03:34.08380137Z&quot;,</div><div class="line">        &quot;Path&quot;: &quot;ping&quot;,</div><div class="line">        &quot;Args&quot;: [</div><div class="line">            &quot;www.qq.com&quot;</div><div class="line">        ],</div></pre></td></tr></table></figure>
<h3 id="发布自己的镜像"><a href="#发布自己的镜像" class="headerlink" title="发布自己的镜像"></a>发布自己的镜像</h3><p>发布docker镜像：现在我们已经验证了新镜像可以正常工作，下一步我们可以将其发布到官方的索引网站。还记得我们最开始下载的learn/tutorial镜像吧，我们也可以把我们自己编译的镜像发布到索引页面，一方面可以自己重用，另一方面也可以分享给其他人使用。</p>
<p>目标：把learn/ping镜像发布到docker的index网站。<br>提示：</p>
<ol>
<li>docker images命令可以列出所有安装过的镜像。</li>
<li>docker push命令可以将某一个镜像发布到官方网站。</li>
<li>你只能将镜像发布到自己的空间下面。这个模拟器登录的是learn帐号。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">root@VM-64-131-ubuntu:~/soft# docker push learn/ping</div><div class="line">The push refers to a repository [docker.io/learn/ping]</div><div class="line">14671d39691e: Retrying in 1 second </div><div class="line">ee1ba0cc9b81: Retrying in 2 seconds </div><div class="line">unauthorized: authentication required</div></pre></td></tr></table></figure>
<p>注意这里需要授权。</p>
<h3 id="版权声明"><a href="#版权声明" class="headerlink" title="版权声明"></a>版权声明</h3><p>作者：苏陌年<br>出处：<a href="http://www.zhengzy.top/" target="_blank" rel="external">http://www.zhengzy.top/</a><br>版权所有，欢迎保留原文链接进行转载：)</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/posts/37956/" data-id="cj3ebyofo0015ovu5bl8l6ohh" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Docker/">Docker</a></div><div class="post-nav"><a href="/posts/39140/" class="pre">python获取命令行参数</a><a href="/posts/59773/" class="next">spring-retry异常重试机制</a></div><div id="disqus_thread"><script>var disqus_shortname = 'zhengzy';
var disqus_identifier = 'posts/37956/';
var disqus_title = 'docker入门';
var disqus_url = 'http://yoursite.com/posts/37956/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//zhengzy.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/tech/">tech</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Shadowsocks/" style="font-size: 15px;">Shadowsocks</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Test/" style="font-size: 15px;">Test</a> <a href="/tags/Maven/" style="font-size: 15px;">Maven</a> <a href="/tags/Soft/" style="font-size: 15px;">Soft</a> <a href="/tags/Hadoop/" style="font-size: 15px;">Hadoop</a> <a href="/tags/Travis-Ci/" style="font-size: 15px;">Travis-Ci</a> <a href="/tags/Zookeeper/" style="font-size: 15px;">Zookeeper</a> <a href="/tags/SpringBoot/" style="font-size: 15px;">SpringBoot</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/MongoDB/" style="font-size: 15px;">MongoDB</a> <a href="/tags/运维/" style="font-size: 15px;">运维</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/开发环境/" style="font-size: 15px;">开发环境</a> <a href="/tags/架构师/" style="font-size: 15px;">架构师</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/posts/2804/">利用Travis Ci自动编译maven项目</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/23656/">hadoop入门1——hadoop集群环境搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/10398/">maven插件ssh上传项目到部署服务器</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/54521/">常用的互联网开源软件清单</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/59773/">spring-retry异常重试机制</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/37956/">docker入门</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/39140/">python获取命令行参数</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/22055/">java一些好用的工具库</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/30918/">ubuntu16.04LTS+shadowsocks+proxychains全局访问</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/55337/">hexo迁移快速部署</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//zhengzy.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://www.haomwei.com/technology/maupassant-hexo.html#主题安装" title="hexo简洁主题" target="_blank">hexo简洁主题</a><ul></ul><a href="http://www.zhengzy.top/" title="demo" target="_blank">demo</a><ul></ul><a href="http://www.zhengzy.top/" title="demo2" target="_blank">demo2</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">苏陌年的小站.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?a7ea5b4b6dc5f82939ce5dd99e4efe67";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>